<div id="fullpage">
{.section collection}

  {.if collections.1}
  <nav id="parallax-nav">
    {.repeated section collections}
      <a href="#{urlId}" id="parallax-nav-item-{urlId}"><div class="dot"><span class="nav-title">{title}</span></div></a>
    {.end}
  </nav>
  {.or}
    <!-- <div class="sqs-state-message error">There are no pages in this Index.</div> -->
  {.end}

  <div id="parallax-images">
    {.repeated section collections}
    <div class="image-container content-fill{.background-source-video?} has-background-video{.end}{.equal? @index 1} first{.end}" data-url-id="{urlId}" data-content-field="main-image">
      {.background-source-video?}
        {@|apply sqs-video-background.block}
        <div class="image-overlay-wrapper"></div>
      {.or}
        {.section mainImage}
        <img {@|image-meta} class="loading" data-load="false" />
        <div class="image-overlay-wrapper"></div>
        {.end}
      {.end}
    </div>
    {.end}
  </div>
  {.repeated section collections}
  <div class="parallax-item section" id="{urlId}" data-url-id="{urlId}">
    <div class="title-desc-wrapper over-image {.background-source-video?} has-main-image has-background-video{.or}{.section mainImage} has-main-image{.or} no-main-image{.end}{.end}{.equal? @index 1} first{.end}" {.section mainImage}data-color-suggested="#{colorData.suggestedBgColor}"{.end}>

      {.background-source-video?}
        <div class="title-desc-image content-fill" data-content-field="main-image">
          {@|apply sqs-video-background.block}
          <div class="image-overlay-wrapper"></div>
        </div>
      {.or}
        {.section mainImage}
        <div class="title-desc-image content-fill" data-content-field="main-image">
          <img {@|image-meta} data-load="false"/>
          <div class="image-overlay-wrapper"></div>
        </div>
        {.end}
      {.end}

      <div class="title-desc-inner" data-collection-id="{id}" data-edit-main-image="Background">
        <div class="page-title-wrapper"><h1 class="page-title" data-content-field="title">{title}</h1></div>
        <br> <!-- this keeps the inline-blocks from collapsing -->
        <div class="page-desc" data-content-field="description">{.section description}{@}{.end}</div>
      </div>
    <!--{.equal? @index 1}<div class="scroll-arrow"><span>SCROLL DOWN</span></div>{.end}-->
    </div>
    <div class="content{.section mainImage} has-main-image{.end}{.section mainContent} has-content{.end}">
    	<div class="content-inner{.section mainContent} has-content{.end}" data-content-field="main-content">
        <div class="title-desc-wrapper">
          <div class="title-desc-inner" data-collection-id="{id}">
            <div class="page-title-wrapper"><h1 class="page-title">{title}</h1></div>
            <br> <!-- this keeps the inline-blocks from collapsing -->
            <div class="page-desc" data-content-field="description">{.section description}{@}{.end}</div>
          </div>
        </div>
	      {mainContent}
	     </div>
    </div>
      <div class="scroll-arrow"><span>SCROLL DOWN</span></div>
  </div>
  {.end}
{.end}
</div>

<script>
    $(window).load(function () {
        $('.parallax-item#video').append('<div class="button-link"><a href="#">FULL REEL</a></div>');
        $('.parallax-item#video .button-link a').click(function( event ) {
            event.preventDefault();
            $('.parallax-item#video .sqs-video-icon').click();
        });

//        var windowH = $(window).height();
//        var windowW = $(window).width();
//        var screen1 = $('.parallax-item[data-url-id="video"]').outerHeight();
//        var screen2 = $('.parallax-item[data-url-id="work"]').outerHeight();
//        var screen3 = screen1 + screen2;
//
//        $('a[href="/#work"]').on('click', function (e) {
//            e.preventDefault();
//            var screen1 = $('.parallax-item[data-url-id="story"]').outerHeight();
//            var screen2 = $('.parallax-item[data-url-id="video"]').outerHeight();
//            var screen3 = screen1 + screen2;
//            $('body,html').animate({
//                scrollTop: screen3
//            }, 800);
//        });
//
//        $('a[href="/#about"]').on('click', function (e) {
//            e.preventDefault();
//            var screen1 = $('.parallax-item[data-url-id="story"]').outerHeight();
//            var screen2 = $('.parallax-item[data-url-id="video"]').outerHeight();
//            var screen3 = $('.parallax-item[data-url-id="work"]').outerHeight();
//            var screen4 = screen1 + screen2 + screen3;
//            $('body,html').animate({
//                scrollTop: screen4
//            }, 800);
//        });
//
//        $('.parallax-item[data-url-id="about"]').css('height', windowH).css('width', windowW);
//        $(window).resize(function () {
//            var windowH = $(window).height();
//            var windowW = $(window).width();
//            $('.parallax-item[data-url-id="about"]').css('height', windowH).css('width', windowW);
//        });
//
//        $('.parallax-item[data-url-id="story"]').css('height', windowH).css('width', windowW);
//        $(window).resize(function () {
//            var windowH = $(window).height();
//            var windowW = $(window).width();
//            $('.parallax-item[data-url-id="story"]').css('height', windowH).css('width', windowW);
//        });
//
//        $('.parallax-item[data-url-id="video"] .scroll-arrow').on('click', function () {
//            var screen1 = $('.parallax-item[data-url-id="video"]').outerHeight();
//            $('body,html').animate({
//                scrollTop: screen1
//            }, 800);
//        });
//        $('.parallax-item[data-url-id="story"] .scroll-arrow').on('click', function () {
//            var screen1 = $('.parallax-item[data-url-id="story"]').outerHeight();
//            var screen2 = $('.parallax-item[data-url-id="video"]').outerHeight();
//            var screen3 = screen1 + screen2;
//            $('body,html').animate({
//                scrollTop: screen3
//            }, 800);
//        });
//        $('.parallax-item[data-url-id="work"] .scroll-arrow').on('click', function () {
//            var screen1 = $('.parallax-item[data-url-id="story"]').outerHeight();
//            var screen2 = $('.parallax-item[data-url-id="video"]').outerHeight();
//            var screen3 = $('.parallax-item[data-url-id="work"]').outerHeight();
//            var screen4 = screen1 + screen2 + screen3;
//            $('body,html').animate({
//                scrollTop: screen4
//            }, 800);
//        });
    });
</script>
